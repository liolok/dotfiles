# User config of pam_env: the PAM module to set/unset environment variables.
# (http://www.linux-pam.org/Linux-PAM-html/sag-pam_env.html)
# (https://wiki.archlinux.org/index.php/Environment_variables#Using_pam_env)

# WARN: Since PAM v1.4.0, administator has to manually alter system level config
# of PAM to let pam_env read user level config. See detail in upstream commit:
# (https://github.com/linux-pam/linux-pam/commit/f83fb5f25263356391d71da595def409e8dd90f7)
# On Arch Linux it's `/etc/pam.d/system-login` file of `pambase` package, find
# `session required pam_env.so` line and append option `user_readenv=1`.
# To custom file path rather than default `~/.pam_environment`, append option
# `user_envfile=path`, in which the path is relative to every user's home.
# The whole line after modification may look like:
# `session    required    pam_env.so user_readenv=1 user_envfile=.config/pam_env.conf`

# Priority mechanism and syntax
# VARIABLE [DEFAULT=[value]] [OVERRIDE=[value]]
# (https://github.com/linux-pam/linux-pam/blob/v1.4.0/modules/pam_env/pam_env.c#L469)
# 1. Override value if provided and expanded to non-empty string;
# 2. Variable undefined/deleted if DEFAULT= provided;
# 3. Default value including empty string expanded or provided with "".
# Use `${VARIABLE}` to expand variables; Use `@{PAM_ITEM}` to expand PAM_ITEMs
# including PAM_USER, PAM_USER_PROMPT, PAM_TTY, PAM_RUSER and PAM_RHOST.
# Special variables @{HOME} and @{SHELL} are expanded to values for user
# according to its record in user database, e.g. `/etc/passwd` file in most cases.
# Both the $ and @ can be backslash escaped to be used as literal values.
# Values can be delimited with "", escaped " not supported.
# Comment lines start with "#" (no space at front), no inline comment support.

# Executable file search path list
# (https://wiki.archlinux.org/index.php/Environment_variables#Examples)
# Prepend user binary directory
# This prepending method causes problem somehow
# PATH DEFAULT=@{HOME}/.bin:${PATH}
# Copied from `ENV_PATH` in `/etc/login.defs` of `core/shadow` package of Arch Linux
PATH DEFAULT=@{HOME}/.bin:/usr/local/sbin:/usr/local/bin:/usr/bin

# Use nano as default text editor
# (https://wiki.archlinux.org/index.php/Nano#Replacing_vi_with_nano)
EDITOR DEFAULT=nano
VISUAL DEFAULT=nano

# XDG base directory specification, modified with a simple data directory.
# (https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html)
XDG_CACHE_HOME  DEFAULT=@{HOME}/.cache
XDG_CONFIG_HOME DEFAULT=@{HOME}/.config
XDG_DATA_HOME   DEFAULT=@{HOME}/.data

# Workarounds for XDG base directory specification
# (https://wiki.archlinux.org/index.php/XDG_Base_Directory)
ANDROID_SDK_ROOT        DEFAULT=${XDG_DATA_HOME}/android-sdk
CARGO_HOME              DEFAULT=${XDG_DATA_HOME}/cargo
HISTFILE                DEFAULT=${XDG_DATA_HOME}/bash/history
IPYTHONDIR              DEFAULT=${XDG_DATA_HOME}/ipython
NPM_CONFIG_USERCONFIG   DEFAULT=${XDG_CONFIG_HOME}/npm/npmrc
PYTHONSTARTUP           DEFAULT=${XDG_CONFIG_HOME}/python/startup.py
PYLINTHOME              DEFAULT=${XDG_CACHE_HOME}/python-pylint
RUSTUP_HOME             DEFAULT=${XDG_DATA_HOME}/rustup

# Qt application theme under non-KDE
# Plan A: Simply follow GTK2 through qt5-styleplugins
# (https://wiki.archlinux.org/index.php/Uniform_look_for_Qt_and_GTK_applications#QGtkStyle)
# QT_QPA_PLATFORMTHEME DEFAULT=gtk2
# Plan B: Gain more control by qt5ct along with kvantum-qt5 and kvantum-theme-*
# (https://wiki.archlinux.org/index.php/Qt#Configuration_of_Qt5_apps_under_environments_other_than_KDE_Plasma)
# (https://wiki.archlinux.org/index.php/Uniform_look_for_Qt_and_GTK_applications#Kvantum)
# QT_QPA_PLATFORMTHEME DEFAULT=qt5ct
# Plan C: Directly use `kvantum` and `kvantum-theme-*` without `qt5ct`.
# (https://github.com/tsujan/Kvantum/issues/221#issuecomment-401081491)
# This line in not necessary at least under Gnome, other DE not tested.
# QT_QPA_PLATFORMTHEME DEFAULT=gnome
QT_STYLE_OVERRIDE DEFAULT=kvantum

# Input method
GTK_IM_MODULE DEFAULT=fcitx
QT_IM_MODULE  DEFAULT=fcitx
XMODIFIERS    DEFAULT=\@im=fcitx
